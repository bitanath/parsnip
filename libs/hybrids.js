/* esm.sh - esbuild bundle(hybrids@9.1.8) es2022 production */
var to=Object.defineProperty;var Ht=(e,t)=>{for(var n in t)to(e,n,{get:t[n],enumerable:!0})};var Xt=new Map;function _(e){let t=Xt.get(e);return t===void 0&&(t=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),Xt.set(e,t)),t}function Be(e,t,n={}){return e.dispatchEvent(new globalThis.CustomEvent(t,{bubbles:!1,...n}))}function Z(e){return`<${String(e.tagName).toLowerCase()}>`}function te(e,t){e.nodeType===globalThis.Node.ELEMENT_NODE&&(t(e),e.shadowRoot&&te(e.shadowRoot,t));let n=globalThis.document.createTreeWalker(e,globalThis.NodeFilter.SHOW_ELEMENT,null,!1);for(;n.nextNode();){let o=n.currentNode;t(o),o.shadowRoot&&te(o.shadowRoot,t)}}var Jt=!1;function Se(){return Jt}function Ge(){Jt=!0}var C=Promise.resolve(),ne=new WeakMap;var oe=new Set;function Oe(e){oe.size===0&&(oe=new Set,C.then(no)),oe.add(e)}function qt(e){oe.delete(e)}function no(){for(let e of oe)try{e()}catch(t){console.error(t)}oe.clear()}var pe=new WeakMap,de=new Set;function He(e){let t=[],n=0;for(;e;){if(e.resolved=!1,e.contexts)for(let o of e.contexts)!de.has(o)&&!t.includes(o)&&t.push(o);e.observe&&Oe(e.observe),e=t[n++]}}function M(e,t){let n=pe.get(e);n||(n=new Map,pe.set(e,n));let o=n.get(t);return o||(o={key:t,target:e,value:void 0,assertValue:void 0,lastValue:void 0,resolved:!1,contexts:void 0,deps:void 0,observe:void 0},n.set(t,o)),o}function Xe(e){let t=pe.get(e);return t?[...t.values()]:[]}var j=null;function Je(){return j?.value}function A(e,t,n){let o=M(e,t);if(j&&(o.contexts||(o.contexts=new Set),j.deps||(j.deps=new Set),o.contexts.add(j),j.deps.add(o)),o.resolved)return o.value;if(o.deps){for(let r of o.deps)r.contexts.delete(o);o.deps.clear()}let s=j;try{if(de.has(o))throw Error(`Circular get invocation is forbidden: '${t}'`);j=o,de.add(o),o.value=n(e,o.assertValue),o.resolved=!0,j=s,de.delete(o)}catch(r){throw j=s,de.delete(o),j&&(j.deps.delete(o),o.contexts.delete(j)),r}return o.value}function he(e,t,n,o){if(j&&j.target===e&&!o)throw Error(`Try to update the '${t}' property while getting the '${j.key}' property`);let s=M(e,t);s.value=void 0,s.assertValue=n,He(s)}function Yt(e,t,n,o){let s=M(e,t),r=n(e,o,s.value);r!==s.value&&(s.value=r,s.assertValue=void 0,He(s))}function je(e,t,n,o){let s=M(e,t);s.observe=()=>{let r=A(e,t,n);r!==s.lastValue&&(o(e,r,s.lastValue),s.lastValue=r)};try{s.observe()}catch(r){console.error(r)}return()=>{s.observe=void 0,s.lastValue=void 0}}var Ne=new Set;function oo(e){Ne.size||setTimeout(()=>{for(let t of Ne)(!t.contexts||t.contexts.size===0)&&pe.get(t.target).delete(t.key);Ne.clear()}),Ne.add(e)}function Zt(e,t){if(He(e),t.clearValue&&(e.value=void 0,e.assertValue=void 0,e.lastValue=void 0),t.deleteEntry){if(e.deps){for(let n of e.deps)n.contexts.delete(e);e.deps=void 0}if(e.contexts){for(let n of e.contexts)n.deps.delete(e);e.contexts=void 0}oo(e)}}function F(e,t,n={}){let o=M(e,t);Zt(o,n)}function Pe(e,t={}){let n=pe.get(e);if(n)for(let o of n.values())Zt(o,t)}function Fe(e){if(e.reflect)throw TypeError("'reflect' option is not supported for 'render' property");let{value:t,observe:n}=e;if(typeof t!="function")throw TypeError(`Value for 'render' property must be a function: ${typeof t}`);let o={connect:e.connect,observe:n?(r,i,a)=>{n(r,i(),a)}:(r,i)=>{i()}},s=e.shadow?{mode:e.shadow.mode||"open",delegatesFocus:e.shadow.delegatesFocus||!1}:e.shadow;return s?o.value=r=>{let i=r.shadowRoot||r.attachShadow(s),a=t(r);return()=>(a(r,i),i)}:s===!1?o.value=r=>{let i=t(r);return()=>(i(r,r),r)}:o.value=r=>{let i=t(r);return()=>i(r)},o}function Qt(e,t,n){!t&&t!==0?e.removeAttribute(n):e.setAttribute(n,t===!0?"":t)}function Ye(e,t){let n=typeof t.value,o=n==="object"?Object.freeze(t.value):t.value;switch(n){case"string":t.value=(r,i)=>i!==void 0?String(i):o;break;case"number":t.value=(r,i)=>i!==void 0?Number(i):o;break;case"boolean":t.value=(r,i)=>i!==void 0?!!i:o;break;case"function":t.value=o;break;default:t.value=(r,i=o)=>i}let s=t.observe;if(t.reflect){let r=_(e),i=typeof t.reflect=="function"?(a,f,u)=>Qt(a,t.reflect(f),u):Qt;s=t.observe?(a,f,u)=>{i(a,f,r),t.observe(a,f,u)}:(a,f)=>i(a,f,r)}return{...t,observe:s,writable:n!=="function"||o.length>1}}var R=new WeakMap,en=new WeakMap,tn=new WeakMap;function ro(e,t){for(let n of this.connects)t.add(n(e));for(let n of this.observers)t.add(n(e))}function Ze(e,t){if(t){let r=R.get(t);if(e===r)return t;for(let i of Object.keys(r))i!=="tag"&&delete t.prototype[i]}else t=class extends globalThis.HTMLElement{constructor(){super();for(let r of t.writable)if(hasOwnProperty.call(this,r)){let i=this[r];delete this[r],this[r]=i}else{let i=this.getAttribute(_(r));i!==null&&(this[r]=i===""&&typeof this[r]=="boolean"||i)}}connectedCallback(){let r=new Set;tn.set(this,r);let i=ro.bind(t,this,r);en.set(this,i),Oe(i)}disconnectedCallback(){qt(en.get(this));for(let r of tn.get(this))r&&r();Pe(this)}};R.set(t,Object.freeze(e));let n=new Set,o=new Set,s=new Set;for(let r of Object.keys(e)){if(r==="tag")continue;let i=e[r];if(typeof i!="object"||i===null)i={value:i};else if(!hasOwnProperty.call(i,"value"))throw TypeError(`The 'value' option is required for '${r}' property of the '${e.tag}' element`);i=r==="render"?Fe(i):Ye(r,i),i.writable&&s.add(r),Object.defineProperty(t.prototype,r,{get:function(){return A(this,r,i.value)},set:i.writable?function(f){he(this,r,f)}:void 0,enumerable:!0,configurable:!0}),i.connect&&n.add(a=>i.connect(a,r,()=>{F(a,r)})),i.observe&&o.add(a=>je(a,r,i.value,i.observe))}return t.connects=n,t.observers=o,t.writable=s,t}var me=new Map;function so(e){me.size||C.then(()=>{te(globalThis.document.body,t=>{if(me.has(t.constructor)){let n=me.get(t.constructor),o=R.get(t.constructor);t.disconnectedCallback();for(let s of Object.keys(o)){let r=typeof o[s],i=r!=="object"&&r!=="function"&&o[s]!==n[s];i&&t.removeAttribute(_(s)),F(t,s,{clearValue:i})}t.connectedCallback()}}),me.clear()}),me.set(e,R.get(e))}var ke=new Set;function nn(e){if(!e.tag)throw TypeError("Error while defining an element: 'tag' property with dashed tag name is required");if(ke.has(e.tag))throw TypeError(`Error while defining '${e.tag}' element: tag name is already defined`);ke.size||C.then(()=>ke.clear()),ke.add(e.tag);let t=globalThis.customElements.get(e.tag);if(t){if(R.get(t))return so(t),Ze(e,t),e;throw TypeError(`Custom element with '${e.tag}' tag name already defined outside of the hybrids context`)}return globalThis.customElements.define(e.tag,Ze(e)),e}function io(e,{root:t="",prefix:n}={}){for(let o of Object.keys(e)){let s=e[o];if(!s.tag){let r=_([].concat(t).reduce((i,a)=>i.replace(a,""),o).replace(/^[./]+/,"").replace(/\//g,"-").replace(/\.[a-zA-Z]+$/,""));s.tag=n?`${n}-${r}`:r}nn(s)}return e}var Qe=Object.freeze(Object.assign(nn,{compile:e=>Ze(e),from:io}));var Le=new WeakMap,on=new WeakMap;function rn(e,t){let n=on.get(e);if(n===t)return;let o=Qe.compile(t);on.set(e,t),Le.has(e)&&Le.get(e)(),Le.set(e,()=>{o.prototype.disconnectedCallback.call(e);for(let[r]of s)delete e[r];Le.delete(e)});let s=Object.entries(Object.getOwnPropertyDescriptors(o.prototype));o.prototype.connectedCallback.call(e);for(let[r,i]of s)if(!(r==="constructor"||r==="connectedCallback"||r==="disconnectedCallback")&&(Object.defineProperty(e,r,{...i,configurable:!0}),n)){let a=typeof t[r],f=a!=="object"&&a!=="function"&&t[r]!==n[r];f&&e.removeAttribute(_(r)),F(e,r,{clearValue:f})}}function lo(e,t){let n=e.parentElement||e.parentNode.host;for(;n;){let o=R.get(n.constructor);if(o&&t(o,e))return n;n=n.parentElement||n.parentNode&&n.parentNode.host}return n||null}function sn(e){let t=typeof e=="function"?e:n=>n===e;return{value:n=>lo(n,t),connect(n,o,s){return s}}}function et(e,t,n,o=[],s=e){for(let r of Array.from(e.children)){let i=R.get(r.constructor);i&&t(i,s)?(o.push(r),n.deep&&n.nested&&et(r,t,n,o,s)):n.deep&&et(r,t,n,o,s)}return o}function ln(e,t={deep:!1,nested:!1}){let n=typeof e=="function"?e:o=>o===e;return{value:o=>et(o,n,t),connect(o,s,r){let i=new globalThis.MutationObserver(r);return i.observe(o,{childList:!0,subtree:!!t.deep}),()=>{i.disconnect()}}}}var ct=Symbol("store.connect"),S=new WeakMap,ze=new WeakMap;function ft(e,t,n){if(n&&(S.set(n,null),ze.set(n,t)),S.set(t,e),e.storage.observe){let o=t&&e.isInstance(t)?t:null,s=n&&e.isInstance(n)?n:null;o!==s&&e.storage.observe(o,s)}return t}function ao(e,t,n){return ft(e,t,n),e.invalidate&&(e.storage.loose||!n||!e.isInstance(n))&&e.invalidate(),t}function ee(e,t,n,o=!0){return Yt(e,t,o?ao:ft,n),n}var Ce;function W(){return Ce||(Ce=Date.now(),C.then(()=>{Ce=void 0})),Ce}var Ae=new WeakMap;function tt(e){let t=Ae.get(e);return t||(t=W(),Ae.set(e,t)),t}function Me(e){return Ae.set(e,W()),e}function an(e){return Ae.set(e,1),e}function st(e){return globalThis.btoa(Array.from(e).reduce((t,n)=>Math.imul(31,t)+n.charCodeAt(0)|0,0))}var nt="hybrids:store:cache",ot={},rt;function co(e,t){let n=`${nt}:${st(JSON.stringify(e.model))}`;return ot[n]=W()+t,rt||(rt=Promise.resolve().then(()=>{let o=JSON.parse(globalThis.localStorage.getItem(nt))||{},s=W();for(let r of Object.keys(o))!ot[r]&&o[r]<s&&(globalThis.localStorage.removeItem(r),delete o[r]);globalThis.localStorage.setItem(nt,JSON.stringify({...o,...ot})),rt=null})),n}function mn(e,t){typeof t=="function"&&(t={get:t});let n={cache:!0,loose:!1,...t};if(n.observe){let o=n.observe;if(typeof o!="function")throw TypeError(`Storage 'observe' property must be a function: ${typeof n.observe}`);n.observe=(s,r)=>{try{let i=r?r.id:s.id;o(i,s,r)}catch(i){console.error(i)}}}if(n.cache===!1||n.cache===0)n.validate=o=>!o||tt(o)===W();else if(typeof n.cache=="number")n.validate=o=>!o||tt(o)+n.cache>W();else{if(n.cache!==!0)throw TypeError(`Storage 'cache' property must be a boolean or number: ${typeof n.cache}`);n.validate=o=>tt(o)!==1}if(n.get||(n.get=o=>{throw ye(Q(o))}),n.offline)try{let o=n.offline===!0,s=o?1e3*60*60*24*30:n.offline,r=co(e,s),i=JSON.parse(globalThis.localStorage.getItem(r))||{},a;n.offline=Object.freeze({key:r,threshold:s,get:o?f=>hasOwnProperty.call(i,f)?JSON.parse(i[f][1]):null:f=>{if(hasOwnProperty.call(i,f)){let u=i[f];return u[0]+s<W()?(delete i[f],null):JSON.parse(u[1])}return null},set(f,u){return u?i[f]=[W(),JSON.stringify(u,function(l,c){if(c===this[""])return c;if(c&&typeof c=="object"){let b=S.get(c);if(b===e&&c.id===f)return String(c);if(b&&b.storage.offline)return b.list?c.map(h=>(Re.get(b.model).storage.offline.set(h.id,h),`${h}`)):(b.storage.offline.set(c.id,c),`${c}`)}return c})]:delete i[f],a||(a=Promise.resolve().then(()=>{let p=W();for(let l of Object.keys(i))i[l][0]+s<p&&delete i[l];globalThis.localStorage.setItem(r,JSON.stringify(i)),a=null})),u}})}catch(o){console.error("Error while setup offline cache",o),n.offline=!1}return Object.freeze(n)}function fo(e){return{get:e.enumerable?()=>null:()=>e.create({}),set:e.enumerable?(t,n)=>n:(t,n)=>n===null?{id:t}:n,list:e.enumerable&&function(n){if(n)throw TypeError("Memory-based model definition does not support id");let o=[];for(let{key:s,value:r}of Xe(e))s!==e&&r&&!De(r)&&o.push(s);return o},loose:!0}}function V(e,t){return Array.isArray(e)?go(e[0],t):yn(e,t)}function cn(e,t){switch(e){case"string":return n=>n!=null?String(n):"";case"number":return Number;case"boolean":return Boolean;default:throw TypeError(`The value of the '${t}' must be a string, number or boolean: ${e}`)}}function B(e,t,n){let o=M(e,"state").value;return he(e,"state",{state:t,value:n,error:(t==="error"?n:o?.error)||!1},!0),e}function se(e){return A(e,"state",(t,n={state:"ready",error:!1})=>n)}function gn(e){return e?(e^Math.random()*16>>e/4).toString(16):("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,gn)}var ut=new WeakSet,it=new WeakMap;function uo(e){if(typeof e!="function")throw TypeError(`The first argument must be a function: ${typeof e}`);return ut.add(e),e}function po(e){if(e==null)throw TypeError(`The value must be defined: ${e}`);if(!ut.has(e)&&typeof e=="function")throw TypeError("A function is not supported as the value of the record");let t=Object.freeze({});return it.set(t,e),t}var bn=new WeakMap;function ho(e,t,n){let o=n.model[t];if(ut.has(o)&&(o=o()),it.has(o)){let r=it.get(o);if(typeof r=="function")throw TypeError(`A function is not supported as the value of the record for '${t}' property`);return{defaultValue:{id:!0,value:r},type:"record"}}let s=typeof o;if(o instanceof String||o instanceof Number||o instanceof Boolean){let r=bn.get(o);if(!r)throw TypeError(O(e,`You must use primitive ${typeof o.valueOf()} value for '${t}' property of the provided model definition`));o=o.valueOf(),s=typeof o,n.checks.set(t,r)}return{defaultValue:o,type:s}}function O(e,t){return`${t}

Model definition:

${JSON.stringify(e,null,2)}
`}var mo=Promise.resolve(),Re=new WeakMap;function yn(e,t){if(typeof e!="object"||e===null)throw TypeError(`Model definition must be an object: ${typeof e}`);let n=Re.get(e);if(n&&!n.enumerable){if(t&&!n.nested)throw TypeError(O(e,"Provided model definition for nested object already used as a root definition"));if(!t&&n.nested)throw TypeError(O(e,"Nested model definition cannot be used outside of the parent definition"))}if(!n){let o=e[ct];typeof o=="object"&&Object.freeze(o);let s,r=hasOwnProperty.call(e,"id"),i=!!o,a=new Map,f={};Object.defineProperty(f,"toString",{value:function(){return this.id}});let u=Object.create(f);n={model:e,external:i,enumerable:r,nested:!r&&!i&&t,placeholder:l=>{let c=Object.create(u);return S.set(c,n),ne.set(c,We),r&&(c.id=l),Object.freeze(c)},isInstance:l=>Object.getPrototypeOf(l)!==u,invalidate:()=>{s||(s=mo.then(()=>{F(n,n,{clearValue:!0}),s=null}))},checks:a},Re.set(e,n),n.storage=mn(n,o||fo(n));let p=Object.keys(Object.freeze(e)).map(l=>{if(l!=="id"&&Object.defineProperty(u,l,{get(){throw Error(O(e,`Model instance in ${se(this).state} state - use store.pending(), store.error(), or store.ready() guards`))},enumerable:!0}),l==="id"){if(e[l]!==!0)throw TypeError(O(e,"The 'id' property in the model definition must be set to 'true' or not be defined"));return(T,h,d)=>{let m;hasOwnProperty.call(h,"id")?m=dt(h.id):d?m=d.id:m=gn(),Object.defineProperty(T,"id",{value:m,enumerable:!0})}}let{defaultValue:c,type:b}=ho(e,l,n);switch(b){case"function":return T=>{Object.defineProperty(T,l,{get(){return A(this,l,()=>c(this))}})};case"object":{if(c===null)throw TypeError(`The value for the '${l}' must be an object instance: ${c}`);if(Array.isArray(c)){let d=typeof c[0];if(d==="undefined")throw TypeError(`The first item of the '${l}' array must be defined`);if(d!=="object"){if(d==="function"&&![String,Number,Boolean].includes(c[0]))throw TypeError(`The array item for the '${l}' must be one of the primitive types constructor: String, Number, or Boolean`);let y=d==="function"?c[0]:cn(d,l),w=d==="function"?[]:Object.freeze(c.map(y));return(g,v,E)=>{if(hasOwnProperty.call(v,l)){if(!Array.isArray(v[l]))throw TypeError(`The value for '${l}' property must be an array: ${typeof v[l]}`);g[l]=Object.freeze(v[l].map(y))}else E&&hasOwnProperty.call(E,l)?g[l]=E[l]:g[l]=w}}let m=V(c,!0);if(m.external&&n.storage.offline&&m.storage.offline&&m.storage.offline.threshold<n.storage.offline.threshold)throw Error(`External nested model for '${l}' property has lower offline threshold (${m.storage.offline.threshold} ms) than the parent definition (${n.storage.offline.threshold} ms)`);if(m.enumerable&&c[1]){let y=c[1];if(typeof y!="object")throw TypeError(`Options for '${l}' array property must be an object instance: ${typeof y}`);y.loose&&(n.contexts=n.contexts||new Set,n.contexts.add(V(c[0])))}return(y,w,g)=>{if(hasOwnProperty.call(w,l)){if(!Array.isArray(w[l]))throw TypeError(`The value for '${l}' property must be an array: ${typeof w[l]}`);y[l]=m.create(w[l],!0)}else y[l]=g&&g[l]||!m.enumerable&&m.create(c)||[]}}if(Object.keys(c).length===0)throw TypeError(`The object for the '${l}' must have at least one property`);let h=V(c,!0);if(h.enumerable||h.external){if(n.storage.offline&&h.storage.offline&&h.storage.offline.threshold<n.storage.offline.threshold)throw Error(`External nested model for '${l}' property has lower offline threshold (${h.storage.offline.threshold} ms) than the parent definition (${n.storage.offline.threshold} ms)`);return(d,m,y)=>{let w;if(hasOwnProperty.call(m,l)){let g=m[l];if(typeof g!="object"||g===null)g!=null&&(w={id:g});else{let v=S.get(g);if(v){if(v.model!==c)throw TypeError("Model instance must match the definition");w=g}else{let E=M(h,m[l].id).value;w=h.create(g,E&&h.isInstance(E)?E:void 0),ee(h,w.id,w)}}}else w=y&&y[l];if(w){let g=w.id;Object.defineProperty(d,l,{get(){return A(this,l,()=>z(c,g))},enumerable:!0})}else d[l]=void 0}}return(d,m,y)=>{hasOwnProperty.call(m,l)?d[l]=m[l]===null?h.create({}):h.create(m[l],y&&y[l]):d[l]=y?y[l]:h.create({})}}case"record":{let T=V(c,!0);return(h,d,m)=>{if(d[l]===null){h[l]={};return}let y=d[l]||{},w={};if(m)for(let g of Object.keys(m[l]))w[g]=m[l][g];for(let g of Object.keys(y)){if(y[g]===null){delete w[g];continue}let v=T.create({id:g,value:y[g]},w[g]);Object.defineProperty(w,g,{get(){return A(this,g,()=>v.value)},enumerable:!0})}h[l]=w}}default:{let T=cn(b,l);return(h,d,m)=>{hasOwnProperty.call(d,l)?h[l]=T(d[l]):m&&hasOwnProperty.call(m,l)?h[l]=m[l]:h[l]=c}}}});n.create=function(c,b){if(c===null)return null;if(typeof c!="object")throw TypeError(`Model values must be an object instance: ${c}`);let T=Object.create(f);for(let h of p)h(T,c,b);return S.set(T,n),ne.set(T,We),Object.freeze(T)},Object.freeze(u),Object.freeze(n)}return n}var fn=Object.getOwnPropertyNames(Array.prototype).reduce((e,t)=>(t==="length"||t==="constructor"||Object.defineProperty(e,t,{get(){throw Error(O(z(S.get(this).model),`Model list instance in ${se(this).state} state - use store.pending(), store.error(), or store.ready() guards`))}}),e),[]),lt=new WeakMap;function go(e,t){let n=lt.get(e);if(n&&!n.enumerable&&!t&&n.nested)throw TypeError(O(e,"Nested model definition cannot be used outside of the parent definition"));if(!n){let o=yn(e),s=new Set;if(o.storage.loose&&s.add(o),!t){if(!o.enumerable)throw TypeError(O(e,"Provided model definition does not support listing (it must be enumerable - set `id` property to `true`)"));if(!o.storage.list)throw TypeError(O(e,"Provided model definition storage does not support `list` action"))}t=!o.enumerable&&!o.external&&t,n={list:!0,nested:t,model:e,contexts:s,enumerable:o.enumerable,external:o.external,placeholder:r=>{let i=Object.create(fn);return S.set(i,n),Object.defineProperties(i,{id:{value:r},toString:{value:function(){return this.id}}}),Object.freeze(i)},isInstance:r=>Object.getPrototypeOf(r)!==fn,create(r,i=!1){if(r===null)return null;let a=[];for(let f of r){let u;if(typeof f=="object"&&f!==null){u=Q(f.id);let p=S.get(f),l=f;if(p){if(p.model!==e)throw TypeError("Model instance must match the definition")}else{let c=o.enumerable&&M(o,u).value;l=o.create(f,c&&o.isInstance(c)?c:void 0),o.enumerable&&(u=Q(l.id),ee(o,u,l,i))}o.enumerable||a.push(l)}else{if(!o.enumerable)throw TypeError(`Model instance must be an object: ${typeof f}`);u=Q(f)}if(o.enumerable){let p=a.length;Object.defineProperty(a,p,{get(){return A(this,p,()=>z(e,u))},enumerable:!0})}}return Object.defineProperties(a,{id:{value:r.id},toString:{value:function(){return this.id}}}),S.set(a,n),ne.set(a,We),Object.freeze(a)}},n.storage=Object.freeze({...mn(n,{cache:o.storage.cache,get:!t&&(r=>o.storage.list(r))}),offline:o.storage.offline&&{threshold:o.storage.offline.threshold,get:r=>{let i=Q(r),a=o.storage.offline.get(st(String(i)));return a?(a=a.map(f=>o.storage.offline.get(f)),a.id=i,a):null},set:(r,i)=>{o.storage.offline.set(st(String(Q(r))),i.map(a=>(o.storage.offline.set(a.id,a),a.id)))}}}),lt.set(e,Object.freeze(n))}return n}function dt(e){if(typeof e!="object")return e!==void 0?String(e):e;let t={};for(let n of Object.keys(e).sort()){if(typeof e[n]=="object"&&e[n]!==null)throw TypeError(`You must use primitive value for '${n}' key: ${typeof e[n]}`);t[n]=e[n]}return t}function Q(e){return e=dt(e),typeof e=="object"?JSON.stringify(e):e}var wn=new WeakSet;function ye(e,t){let n=Error(O(e,`Model instance ${t!==void 0?`with '${t}' id `:""}does not exist`));return wn.add(n),n}function ge(e,t){return Se()&&!wn.has(t)&&console.error(t),B(e,"error",t)}function z(e,t){let n=V(e),o;if(n.enumerable){if(o=Q(t),!o&&!n.list&&!we.get(n))throw TypeError(O(e,`Provided model definition requires non-empty id: "${o}"`))}else if(t!==void 0)throw TypeError(O(e,`Provided model definition does not support id: ${JSON.stringify(t)}`));let{offline:s,validate:r}=n.storage,i=M(n,o),a=i.value;return a&&se(a).state!=="pending"&&!r(a)&&(i.resolved=!1),A(n,o,()=>{t=dt(t);let f=!0;if(n.contexts)for(let c of n.contexts)A(c,c,()=>W())===W()&&(f=!1);if(f&&a&&r(a))return a;let u=()=>a||s&&n.create(s.get(o))||n.placeholder(t),p;try{p=n.storage.get(t)}catch(c){return Me(ge(u(),c))}if(!(p instanceof Promise)&&p!==void 0&&typeof p!="object")throw TypeError(O(e,`Storage 'get' method must return a Promise, an instance, or null: ${p}`));try{if(typeof p!="object"||p===null)throw s&&s.set(o,null),ye(e,o)}catch(c){return Me(ge(u(),c))}if(p instanceof Promise)return p=p.then(c=>{if(c!==void 0&&typeof c!="object")throw TypeError(O(e,`Storage 'get' method must resolve to an instance, or null: ${c}`));if(typeof c!="object"||c===null)throw s&&s.set(o,null),ye(e,o);c.id!==t&&(c.id=t);let b=n.create(c);return s&&s.set(o,b),ee(n,o,Me(b))}).catch(c=>ee(n,o,ge(u(),c))),B(u(),"pending",p);p.id!==t&&(p.id=t);let l=n.create(p);return s&&Promise.resolve().then(()=>{s.set(o,l)}),ft(n,Me(l),a)})}var we=new WeakMap;function un(e){let t=Object.keys(e),n=Error(`Model validation failed (${t.join(", ")}) - read the details from 'errors' property`);return n.errors=e,n}function be(e,t={}){let n=S.get(e);if(n===null&&(e=ze.get(e),n=S.get(e)),n===null)throw Error("Provided model instance has expired. Haven't you used stale value?");let o=!!n;if(n||(n=V(e)),n.nested)throw O(n.model,TypeError("Setting provided nested model instance is not supported, use the root model instance"));if(n.list)throw TypeError("Listing model definition does not support 'set' method");if(!n.storage.set)throw O(n.model,TypeError("Provided model definition storage does not support 'set' method"));if(!o&&!n.enumerable&&(o=!0,e=z(e)),o){let c=re(e);if(c)return c.then(b=>be(b,t))}let s=we.get(n),r;if(n.enumerable&&!o&&(!t||typeof t!="object"))throw TypeError(`Values must be an object instance: ${t}`);if(!s&&t&&hasOwnProperty.call(t,"id"))throw TypeError(`Values must not contain 'id' property: ${t.id}`);let i=n.create(t,o?e:void 0),a=t?Object.keys(t):[],f={},u=o&&s&&De(e),p=!1;if(i&&n.checks.size)for(let[c,b]of n.checks.entries()){if(a.indexOf(c)===-1&&(u&&u.errors&&u.errors[c]&&(p=!0,f[c]=u.errors[c]),s&&i[c]==n.model[c]))continue;let T;try{T=b(i[c],c,i)}catch(h){T=h}T!==!0&&T!==void 0&&(p=!0,f[c]=T||!0)}let l;try{if(p&&!s)throw un(f);r=i?i.id:e.id,l=n.storage.set(o?r:void 0,i,a)}catch(c){return o&&B(e,"error",c),Promise.reject(c)}if(!(l instanceof Promise)&&l!==void 0&&typeof l!="object")throw TypeError(O(n.model,`Storage 'set' method must return a Promise, an instance, or null: ${l}`));return l=Promise.resolve(l).then(c=>{if(c!==void 0&&typeof c!="object")throw TypeError(O(n.model,`Storage 'set' method must resolve to an instance or null: ${c}`));let b=c===i?i:n.create(c);if(o&&b&&r!==b.id)throw TypeError(O(n.model,`Local and storage data must have the same id: '${r}', '${b.id}'`));let T=b?b.id:r;return p&&s&&B(b,"error",un(f)),s&&o&&hasOwnProperty.call(c,"id")&&(!i||i.id!==e.id)?T=e.id:n.storage.offline&&n.storage.offline.set(T,b),ee(n,T,b||ge(n.placeholder(T),ye(n.model,r)),!0)}).catch(c=>{throw c=c!==void 0?c:Error("Undefined error"),o&&B(e,"error",c),c}),o&&B(e,"pending",l),l}function bo(e,t){if(typeof t!="object")throw TypeError(`Values must be an object instance: ${t}`);let n=S.get(e);if(n===null&&(e=ze.get(e),n=S.get(e)),n===null)throw Error("Provided model instance has expired. Haven't you used stale value?");if(n===void 0){if(!t)throw TypeError("Values must be defined for usage with model definition");n=V(e),e=void 0}else if(t&&hasOwnProperty.call(t,"id"))throw TypeError(`Values must not contain 'id' property: ${t.id}`);if(n.list)throw TypeError("Listing model definition is not supported in sync method");let o=n.create(t,e),s=t?o.id:e.id;return ee(n,s,o||ge(n.placeholder(s),ye(n.model,s)))}function pt(e,t=!0){if(typeof e!="object"||e===null)throw TypeError(`The first argument must be a model instance or a model definition: ${e}`);let n=S.get(e);if(n===null)throw Error("Provided model instance has expired. Haven't you used stale value from the outer scope?");if(n){let o=t&&n.storage.offline;o&&o.set(e.id,null),an(e),F(n,e.id,{clearValue:t,deleteEntry:t})}else{if(!Re.get(e)&&!lt.get(e[0]))return;n=V(e);let o=t&&n.storage.offline;for(let s of Xe(n))s.key!==n&&(o&&o.set(s.key,null),an(s.value));Pe(n,{clearValue:t,deleteEntry:t})}}function re(...e){let t=!1,n=e.map(o=>{try{let{state:s,value:r}=se(o);if(s==="pending")return t=!0,r}catch{}return Promise.resolve(o)});return t&&(e.length>1?Promise.all(n):n[0])}function Tn(e,t){e=ze.get(e)||e,S.get(e)||(e=z(e,t));let n=re(e);if(!n){let o=De(e);return o?Promise.reject(o):Promise.resolve(e)}return n.then(o=>Tn(o))}function De(e,t){if(e===null||typeof e!="object")return!1;let n=se(e);if(t!==void 0){let o=typeof n.error=="object"&&n.error&&n.error.errors;return t===null?!o&&n.error:o[t]}return n.error}function at(...e){return e.length>0&&e.every(t=>{let n=S.get(t);return!!(n&&n.isInstance(t))})}function dn(e,t){return e={...e,...t},delete e.id,e}function yo(e,t={}){let n=S.get(e);if(!n||!we.has(n))throw TypeError(`Provided model instance is not a draft: ${e}`);if(re(e))throw Error("Model draft in pending state");let o=we.get(n),s;if(M(o,e.id).value){let r=z(o.model,e.id);s=Promise.resolve(re(r)||r).then(i=>be(i,dn(e,t)))}else s=be(o.model,dn(e,t));return s=s.then(r=>(B(e,"ready"),be(e,r).then(()=>r))).catch(r=>(B(e,"error",r),Promise.reject(r))),B(e,"pending",s),s}function wo(e,t){return!!e||`${t} is required`}function To(e,t=wo,n=""){switch(typeof e){case"string":e=new String(e);break;case"number":e=new Number(e);break;case"boolean":e=new Boolean(e);break;default:throw TypeError(`Default value must be a string, number or boolean: ${typeof e}`)}let o;if(t instanceof RegExp)o=s=>t.test(s)||n;else if(typeof t=="function")o=(...s)=>{let r=t(...s);return r!==!0&&r!==void 0&&n||r};else throw TypeError(`The second argument must be a RegExp instance or a function: ${typeof t}`);return bn.set(e,o),e}function En(e){return typeof e=="object"?e?.id:e??void 0}function pn(e,t,n){if(n=En(n),!t.enumerable&&!t.list)return z(e,n);let o=Je(),s=n!==void 0||t.list?z(e,n):void 0;if(o&&s&&s.id!==o.id&&at(o)&&!at(s)){let r=S.get(o),i=Object.freeze(Object.create(o));return S.set(i,r),he(i,"state",se(s),!0),i}return s}function hn(e,t,n,o){let s=Je();if(n=En(n??s?.id),n===void 0&&!s&&o==null)if(t.enumerable){let r=t.create({});n=r.id,ee(t,r.id,r,!1)}else pt(t.model);return z(e,n)}function We(e,t={}){let n=V(e);if(t.id!==void 0&&typeof t.id!="function"){let s=t.id;t.id=r=>r[s]}if(t.id&&!n.enumerable)throw TypeError("Store factory for singleton model definition does not support 'id' option");let o;if(t.draft){if(n.list)throw TypeError("Draft mode is not supported for listing model definition");return o=V({...e,[ct]:{get(s){let r=z(n.model,s);return re(r)||r},set(s,r){return r===null?{id:s}:r}}}),we.set(o,n),e=o.model,{value:t.id?(s,r)=>hn(e,o,t.id(s),r):(s,r)=>hn(e,o,r,r),connect:n.enumerable?(s,r)=>()=>{pt(s[r],!0)}:void 0}}return{value:t.id?s=>pn(e,n,t.id(s)):(s,r)=>pn(e,n,r)}}var Eo=Object.freeze(Object.assign(We,{connect:ct,get:z,set:be,sync:bo,clear:pt,pending:re,error:De,ready:at,submit:yo,value:To,resolve:Tn,ref:uo,record:po}));var mt=Symbol("router.connect"),P=new WeakMap,Tt=new WeakMap,K=new WeakMap,Sn=new WeakMap,U=null,Et=new Set,gt=new WeakMap,On=new WeakMap;function vn(){let e=K.get(U)[0];if(!e)return;let t=globalThis.document.activeElement;On.set(e,U.contains(t)&&t);let n=new Map;for(let o of[globalThis.document.documentElement,globalThis.document.body])n.set(o,{left:o.scrollLeft,top:o.scrollTop});te(e,o=>{(o.scrollLeft||o.scrollTop)&&n.set(o,{left:o.scrollLeft,top:o.scrollTop})}),gt.set(e,n)}function bt(e){if(e.tabIndex===-1){let t=e.style.outline;e.tabIndex=0,e.style.outline="none",e.addEventListener("blur",()=>{e.removeAttribute("tabindex"),e.style.outline=t},{once:!0})}e.focus({preventScroll:!0})}function vo(e){let t=globalThis.document.activeElement;C.then(()=>{bt(On.get(e)||(U.contains(t)?t:U));let n=gt.get(e);if(n){let o=P.get(e),r=globalThis.history.state.find(a=>a.id===o.id),i=r&&r.params.scrollToTop;for(let[a,{left:f,top:u}]of n)a.scrollLeft=i?0:f,a.scrollTop=i?0:u;gt.delete(e)}else for(let o of[globalThis.document.documentElement,globalThis.document.body])o.scrollLeft=0,o.scrollTop=0;setTimeout(()=>{globalThis.history.scrollRestoration="auto"},0)})}function _e(e){return e===!0?1:e||""}var Ie=["scrollToTop"];function $o(e,t){let[n,o=""]=e.split("?"),s=o?o.split(","):[],r=n.replace(/^\//,"").split("/"),i=r.reduce((a,f)=>{if(f.startsWith(":")){let u=f.slice(1);if(s.includes(u))throw Error(`The '${u}' already used in search params`);if(a.includes(u))throw Error(`The '${u}' already used in pathname`);a.push(u)}return a},[]);return{browserUrl:e,pathnameParams:i,paramsKeys:[...s,...i],url(a,f=!1){let u="";for(let l of r){if(l.startsWith(":")){let c=l.slice(1);if(!hasOwnProperty.call(a,c))throw Error(`The '${c}' parameter must be defined for <${t}>`);l=_e(a[c])}u+=`/${l}`}let p=new URL(u,globalThis.location.origin);for(let l of Object.keys(a))i.includes(l)||f&&(Ie.includes(l)||!s.includes(l))||p.searchParams.append(l,_e(a[l]));return p},match(a){let f={},u=a.pathname.replace(/^\//,"").split("/");if(u.length!==r.length)return null;for(let p=0;p<u.length;p+=1){let l=u[p],c=r[p];if(c.startsWith(":")){let b=c.slice(1);f[b]=l}else if(l!==c)return null}for(let[p,l]of a.searchParams)f[p]=l;return f}}}function Ee(e,t){return e.stack.some(n=>n===t?!0:Ee(n,t))}function Nn(e){e.browserUrl&&Et.add(e);for(let t of e.stack)Nn(t)}function yt(e,t,n=null,o=null){return typeof e=="function"&&(e=e()),e=[].concat(e),e.map(s=>{let r=P.get(s);if(r&&Ee(r,n))throw Error(`<${r.id}> cannot be in the stack of <${n.id}>, as it is an ancestor in the stack tree`);return So(s,t,n,o)})}function xo(e,t){let n=Object.values(e).map(o=>Sn.get(o)).filter(o=>o);if(n.length){if(n.length>1)throw TypeError(`<${t.id}> must contain at most one nested router, found: ${n.length}`);if(t.dialog)throw TypeError(`Nested routers are not supported in dialogs. Remove the router property definition from <${t.id}>`);if(t.browserUrl)throw TypeError(`A view with nested router must not have the url option. Remove the url option from <${t.id}>`)}return n[0]}function k(e){let t=globalThis.customElements.get(e);return P.get(t)}function So(e,t,n,o){let s=e.tag,r=k(s);if(r&&r.hybrids!==e&&(r=null),r)r.parent=n,r.nestedParent=o,n&&!n.stack.includes(r)&&n.stack.push(r);else{let a=globalThis.customElements.get(s);if(!a||R.get(a)!==e)throw Error(`<${s}> view must be defined by 'define()' function before it can be used in router factory`);let f=null,u={dialog:!1,guard:!1,multiple:!1,replace:!1,...e[mt]},{connects:p}=a;if(u.dialog&&p.add(h=>{let d=U,m=w=>{K.get(d)[0]===h&&w.key==="Escape"&&(w.stopPropagation(),globalThis.history.go(-1))},y=w=>{K.get(d)[0]===h&&!h.contains(w.target)&&w.target!==h&&bt(h)};return d.addEventListener("focusin",y),d.addEventListener("focusout",y),h.addEventListener("keydown",m),bt(h),()=>{d.removeEventListener("focusin",y),d.removeEventListener("focusout",y),h.removeEventListener("keydown",m)}}),u.url){if(u.dialog)throw Error(`The 'url' option is not supported for dialogs - remove it from <${s}>`);if(typeof u.url!="string")throw TypeError(`The 'url' option in <${s}> must be a string: ${typeof u.url}`);f=$o(u.url,s);for(let h of f.paramsKeys){let d=Object.getOwnPropertyDescriptor(a.prototype,h);if(!d||!d.set)throw Error(`'${h}' parameter from the url is not ${d?"writable":"defined"} in <${s}>`)}}let l=[...a.writable],c=l.filter(h=>!t.params.includes(h)&&!Ie.includes(h)),b=f?c.filter(h=>!f.pathnameParams.includes(h)):c;p.add(h=>je(h,mt,d=>{let m={};for(let y of c){let w=_e(d[y]).toString();m[y]=w!==void 0&&d[y]!==e[y]?String(w):void 0}return m},(d,m,y)=>{if(!y||!globalThis.history.state)return;let w=globalThis.history.state,g=w.findIndex(E=>{if(E.id===s)return!0;if(E.nested){let $=E.nested;for(;$;){if($.id===s)return!0;$=$.nested}}}),v=w[g];for(;v.id!==s&&v.nested;)v=v.nested;m={...v.params,...m};for(let E of b)m[E]===void 0&&delete m[E];globalThis.history.replaceState(w.map((E,$)=>$===g?r.getEntry(m):E),"",f?r.url(m,!0):"")}));let T;if(u.guard&&(T=()=>{try{return u.guard()}catch(h){return console.error(h),!1}}),r={id:s,hybrids:e,dialog:u.dialog,multiple:u.multiple,replace:u.replace,guard:T,parent:n,nestedParent:o,nestedRoots:void 0,parentsWithGuards:void 0,stack:[],...f||{url(h){let d=new URL("",globalThis.location.origin);for(let m of Object.keys(h))d.searchParams.append(m,_e(h[m]));return new URL(`${t.url}#@${s}${d.search}`,globalThis.location.origin)},match(h){let d={};for(let[m,y]of h.searchParams)(l.includes(m)||Ie.includes(m))&&(d[m]=y);return d}},create(){let h=new a;return P.set(h,r),h},getEntry(h={},d){let m={};for(let g of Object.keys(h))l.includes(g)&&(m[g]=h[g]);let y={id:s,params:m,...d},w=r.parentsWithGuards.find(g=>!g.guard());if(w)return w.getEntry(h,{from:y});if(r.guard&&r.guard())return{...r.stack[0].getEntry(h)};if(r.nestedParent)return r.nestedParent.getEntry(h,{nested:y});for(let g of Ie)hasOwnProperty.call(h,g)&&(y.params[g]=h[g]);return y}},P.set(e,r),P.set(a,r),n&&!n.stack.includes(r)&&n.stack.push(r),u.stack){if(u.dialog)throw Error(`The 'stack' option is not supported for dialogs - remove it from <${s}>`);yt(u.stack,t,r,o)}}for(n||Nn(r),r.parentsWithGuards=[];n;)n.guard&&r.parentsWithGuards.unshift(n),n=n.parent;let i=xo(e,r);return i&&(r.nestedRoots=yt(i.views,{...t,...i},r,r),r.stack=r.stack.concat(r.nestedRoots)),r}function Oo(e,t={}){let n=P.get(e);return n?n.url(t):""}function $n(e){let t={};for(;e;)Object.assign(t,e.params),e=e.nested;return t}function No({nested:e=!1,scrollToTop:t=!1}={}){let n=globalThis.history.state;if(!n)return"";if(n.length>1){let r=n[0],i=1,a=n[i];if(e)for(;a.nested;)a=a.nested;else for(;r.id===a.id&&i<n.length-1;)i+=1,a=n[i];let f=$n(n[i]);return t?f.scrollToTop=!0:delete f.scrollToTop,k(a.id).url(f)}let o=n[0];if(e)for(;o.nested;)o=o.nested;let s=k(o.id).parent;if(s){for(;s&&s.guard;)s=s.parent;if(s)return s.url($n(n[0]))}return""}function jo(e={}){let t=globalThis.history.state;if(!t)return"";let n=t[0];if(n.from)return k(n.from.id).url({...n.from.params,...e});let o=k(n.id);return o.stack[0]?o.stack[0].url(e):""}function Po(e){let t=globalThis.history.state;if(!t)return"";let n=t[0];for(;n.nested;)n=n.nested;return k(n.id).url({...n.params,...e})}function ko(e,{stack:t=!1}={}){let n=globalThis.history.state;return n?(e=[].concat(e),e.some(o=>{let s=P.get(o);if(!s)throw TypeError(`Provided view is not connected to the router: ${o}`);let r=n[0];for(;r;){let i=k(r.id);if(i===s||t&&Ee(s,i))return!0;r=r.nested}return!1})):!1}function wt(e){let t,[n,o]=e.hash.split("?");if(n&&n.match(/^#@.+-.+/)&&(t=k(n.split("@")[1]),e=new URL(`?${o}`,globalThis.location.origin)),!t){for(let s of Et){let r=s.match(e);if(r)return s.getEntry(r)}return null}return t.getEntry(t.match(e))}function Te(e){if(e.defaultPrevented)return;let t;if(e.type==="click"){if(e.ctrlKey||e.metaKey)return;let n=e.composedPath().find(o=>o instanceof globalThis.HTMLAnchorElement);n&&(t=new URL(n.href,globalThis.location.origin))}else t=new URL(e.target.action,globalThis.location.origin);if(t&&t.origin===globalThis.location.origin){let n=wt(t);n&&(e.preventDefault(),Be(U,"navigate",{bubbles:!0,detail:{entry:n,url:t}}))}}var ht;function Lo(e,t){e.preventDefault(),ht=t;let n=e.composedPath(),o={type:e.type,ctrlKey:e.ctrlKey,metaKey:e.metaKey,target:e.target,defaultPrevented:!1,preventDefault:()=>{},composedPath:()=>n};return t.then(()=>{t===ht&&(Te(o),ht=null)})}function jn(e,t,n){let o=K.get(e),s=[];for(let[f,u]of t.entries())(f===0||t[f-1].id!==u.id||k(u.id).multiple)&&s.push(u);let r=o.length-s.length;o=s.map((f,u)=>{let p=o[u+r],l=k(f.id),c;if(p){let b=P.get(p);if(l.id!==b.id||u===0&&l.replace)return l.create();c=p}else c=l.create();return c}),K.set(e,o);let i=o[0],a=Tt.get(i);for(let[f,u]of Object.entries(t[0].params))f in i&&(i[f]=u);for(let f of n.params)f in i&&(i[f]=e[f]);return a&&a(),o}function Co(e){let t=[];for(let[s,r]of globalThis.history.state.entries()){let i=0;for(;r;)t[i]=t[i]||[],t[i][s]=r,r=r.nested,i+=1}let n=0,o=0;for(;e;){let s=k(e.id),r=n;for(;r<t[o].length;r+=1){let i=t[o][r];if(s.dialog){if(i.id===e.id)return r;continue}if(i.id===e.id)if(s.multiple){if(s.pathnameParams&&s.pathnameParams.every(f=>e.params[f]===i.params[f])||Object.entries(e.params).every(([f,u])=>i.params[f]===u)){n=r;break}}else{n=r;break}let a=k(i.id);if(Ee(a,s)){if(s.multiple&&t[o][0].id===e.id){n-=1;break}if(r>0){n=r-1;break}else return a.guard?0:-1}}if(s.dialog)return-1;r===t[o].length&&(n=t[o].length-1),e=e.nested,o+=1}return n}function xn(e,t){let n=globalThis.document.documentElement;if(!e){n.removeAttribute("router-transition");return}let{dialog:o}=P.get(e[0].constructor),s=o&&"dialog"||t.length&&(e.length>t.length&&"forward"||e.length<t.length&&"backward"||e[0]!==t[0]&&"replace")||"";n.setAttribute("router-transition",s)}function Mo(e,t,n){function o(){let l=K.get(e),c=jn(e,globalThis.history.state,n);n.transition&&xn(c,l),t();let b=c[0];P.get(b).dialog||vo(b)}function s(){if(globalThis.history.state)o();else{let l=new URL(globalThis.location.href),c=wt(l);c&&(globalThis.removeEventListener("popstate",s),globalThis.addEventListener("popstate",()=>{globalThis.addEventListener("popstate",s),i(c)},{once:!0}),globalThis.history.back())}}function r(l,c,b){let T=globalThis.history.state,h=globalThis.history.state[l],d=l<T.length-1&&T.length>2?1:0;l+=d,h&&c.id===h.id&&(c={...h,...c});let m=y=>{y&&(globalThis.removeEventListener("popstate",m),globalThis.addEventListener("popstate",s));let w=d?"pushState":"replaceState",g=[c,...T.slice(l+(d?0:1))];globalThis.history[w](g,"",b),o()};l?(globalThis.removeEventListener("popstate",s),globalThis.addEventListener("popstate",m),globalThis.history.go(-l)):(vn(),m())}function i(l){let c=globalThis.history.state,b=l;for(;b.nested;)b=b.nested;let T=k(b.id),h=T.browserUrl?T.url(b.params,!0):n.url,d=Co(l);d>-1?r(d,l,h):(vn(),globalThis.history.scrollRestoration="manual",globalThis.history.pushState([l,...c],"",h),o())}function a(l){i(l.detail.entry)}if(U)throw Error(`An element with root router already connected to the document: <${U.tagName.toLowerCase()}>`);let f;try{f=yt(n.views,n),U=e,Tt.set(e,o)}catch(l){throw console.error(`Error while connecting router in <${e.tagName.toLowerCase()}>:`),l}let u=globalThis.history.state,p=new URL(globalThis.location.href);if(u){let l=K.get(e),c;for(c=u.length-1;c>=0;c-=1){let b=u[c];for(;b;){let T=k(b.id);if(!T||T.dialog&&l.length===0||!f.includes(T)&&!f.some(h=>Ee(h,T)))break;b=b.nested}if(b)break}if(c>-1){let b=u[c+1];r(u.length-c-1,b||f[0].getEntry(u[0].params),n.url)}else{let b=u[0];for(;b.nested;)b=b.nested;let h=k(b.id).getEntry(b.params);i(h)}}else{let l=wt(p)||f[0].getEntry();globalThis.history.replaceState([l],"",n.url),o()}return globalThis.addEventListener("popstate",s),e.addEventListener("click",Te),e.addEventListener("submit",Te),e.addEventListener("navigate",a),()=>{globalThis.removeEventListener("popstate",s),e.removeEventListener("click",Te),e.removeEventListener("submit",Te),e.removeEventListener("navigate",a),xn(null),Et.clear(),U=null;let l=globalThis.history.state&&globalThis.history.state.length;l>1&&(globalThis.history.go(1-l),globalThis.history.replaceState(u,"",p))}}function Ao(e,t,n){let o=P.get(e);function s(){return globalThis.history.state.map(i=>{for(;i;){if(i.id===o.id)return i.nested;i=i.nested}return i}).filter(i=>i)}function r(){jn(e,s(),n),t()}if(!s()[0]){let i=globalThis.history.state;globalThis.history.replaceState([o.nestedRoots[0].getEntry(i[0].params),...i.slice(1)],"")}r(),Tt.set(e,r)}function Ro(e,t){t={url:globalThis.location.href.replace(/#.*$/,""),params:[],...t,views:e};let n={value:o=>{let s=K.get(o)||[];return s.slice(0,s.findIndex(r=>!P.get(r).dialog)+1).reverse()},connect:(o,s,r)=>{for(let i of t.params)if(!(i in o))throw Error(`Property '${i}' for global parameters is not defined in <${o.tagName.toLowerCase()}>`);return K.has(o)||K.set(o,[]),P.has(o)?Ao(o,r,t):Mo(o,r,t)},observe:Se()&&((o,s,r)=>{let i=s.length-1,a=s[i];if(r&&a===r[i])return;let f=P.get(o),u=globalThis.history.state[0],p=0;for(;f;)p+=1,u=u.nested,f=f.nestedParent;console.groupCollapsed(`[${o.tagName.toLowerCase()}]: navigated to <${u.id}> ($$${p})`);for(let[l,c]of Object.entries(u.params))console.log(`%c${l}:`,"font-weight: bold",c);console.groupEnd(),globalThis[`$$${p}`]=a})};return Sn.set(n,t),n}var Wo=Object.freeze(Object.assign(Ro,{connect:mt,debug:Ge,url:Oo,backUrl:No,guardUrl:jo,currentUrl:Po,resolve:Lo,active:ko}));var ve=new WeakMap;function D(e){let t=ve.get(e);return t||(ve.set(e,t={}),t)}function ie(e){let t;for(;e&&(t=D(e))&&t.endNode;)e=t.endNode;return e}function G(e){if(e.nodeType===globalThis.Node.TEXT_NODE){let t=ve.get(e);if(t&&t.startNode){let n=ie(t.endNode),o=t.startNode,s=n.nextSibling;for(;o;){let r=o.nextSibling;o.parentNode.removeChild(o),o=r!==s&&r}ve.set(e,{})}}else{let t=e.childNodes[0];for(;t;)e.removeChild(t),t=e.childNodes[0];ve.set(e,{})}}var zo=Date.now(),L=(e=0)=>`H-${zo}-${e}`;var xt=!!(globalThis.document&&globalThis.document.adoptedStyleSheets),vt=/^\d+$/,Do={block:(e,t)=>({display:"block","text-align":t}),inline:({display:e})=>({display:`inline${e?`-${e}`:""}`}),contents:{display:"contents"},hidden:{display:"none"},...["row","row-reverse","column","column-reverse"].reduce((e,t)=>(e[t]=(n,o="nowrap")=>({display:"flex","flex-flow":`${t} ${o}`}),e),{}),grow:(e,t=1)=>({"flex-grow":t}),shrink:(e,t=1)=>({"flex-shrink":t}),basis:(e,t)=>({"flex-basis":x(t)}),order:(e,t=0)=>({order:t}),grid:(e,t="1",n="",o="",s="")=>({display:"grid",...["columns","rows"].reduce((r,i)=>{let a=i==="columns"?t:n;return r[`grid-template-${i}`]=a&&a.split("|").map(f=>f.match(vt)?`repeat(${f}, minmax(0, 1fr))`:x(f)).join(" "),r},{}),"grid-auto-flow":`${o} ${s&&"dense"}`}),area:(e,t="",n="")=>({"grid-column":t.match(vt)?`span ${t}`:t,"grid-row":n.match(vt)?`span ${n}`:n}),gap:(e,t=1,n="")=>({"column-gap":x(t),"row-gap":x(n||t)}),items:(e,t="start",n="")=>({"place-items":`${t} ${n}`}),content:(e,t="start",n="")=>({"place-content":`${t} ${n}`}),self:(e,t="start",n="")=>({"place-self":`${t} ${n}`}),center:{"place-items":"center","place-content":"center"},size:(e,t,n=t)=>({width:x(t),height:x(n),"box-sizing":"border-box"}),width:(e,t,n,o)=>({width:x(t),"min-width":x(n),"max-width":x(o),"box-sizing":"border-box"}),height:(e,t,n,o)=>({height:x(t),"min-height":x(n),"max-height":x(o),"box-sizing":"border-box"}),ratio:(e,t)=>({"aspect-ratio":t}),overflow:(e,t="hidden",n="")=>{let o=n?`-${t}`:"",s=n||t;return{[`overflow${o}`]:s,...s==="scroll"?{"flex-grow":e["flex-grow"]||1,"flex-basis":0,"overscroll-behavior":"contain","--webkit-overflow-scrolling":"touch"}:{}}},margin:(e,t="1",n,o,s)=>t.match(/top|bottom|left|right/)?{[`margin-${t}`]:x(n||"1")}:{margin:`${x(t)} ${x(n)} ${x(o)} ${x(s)}`},padding:(e,t="1",n,o,s)=>t.match(/top|bottom|left|right/)?{[`padding-${t}`]:x(n||"1")}:{padding:`${x(t)} ${x(n)} ${x(o)} ${x(s)}`},absolute:{position:"absolute"},relative:{position:"relative"},fixed:{position:"fixed"},sticky:{position:"sticky"},static:{position:"static"},inset:(e,t=0)=>{let n=x(t);return{top:n,right:n,bottom:n,left:n}},top:(e,t=0)=>({top:x(t)}),bottom:(e,t=0)=>({bottom:x(t)}),left:(e,t=0)=>({left:x(t)}),right:(e,t=0)=>({right:x(t)}),layer:(e,t=1)=>({"z-index":t}),"":(e,t,...n)=>{if(n.length<2)throw new Error("Generic rule '::' requires at least two arguments, eg.: ::[property]:[name]");return{[n[n.length-2]]:`var(--${n.join("-")})`}},view:(e,t)=>({"view-transition-name":t})},Io={min:"min-content",max:"max-content",fit:"fit-content",full:"100%"},_o={portrait:"orientation: portrait",landscape:"orientation: landscape",hover:"hover: hover","any-hover":"any-hover: hover"};function x(e){return e=Io[e]||e,/^-?\d+(\.\d+)*$/.test(String(e))?`${e*8}px`:e||""}var le;function Ln(){if(le)return le;if(xt)le=new globalThis.CSSStyleSheet;else{let e=globalThis.document.createElement("style");e.appendChild(globalThis.document.createTextNode("")),globalThis.document.head.appendChild(e),le=e.sheet}return le.insertRule(":host([hidden]) { display: none; }"),le}var Pn=new WeakMap,$t=new WeakSet;function Cn(e){let t=e.getRootNode();if($t.has(t))return;let n=Ln();if(xt&&t.adoptedStyleSheets)t.adoptedStyleSheets=[...t.adoptedStyleSheets,n];else{if(t===globalThis.document)return;let o=Pn.get(t);o||(o=globalThis.document.createElement("style"),t.appendChild(o),Pn.set(t,o));let s="";for(let r=0;r<n.cssRules.length;r++)s+=n.cssRules[r].cssText;o.textContent=s}$t.add(t)}var kn=new Map;function St(e,t,n,o){let s=kn.get(e);s||(s=`l-${Math.random().toString(36).substr(2,5)}`,kn.set(e,s)),xt||($t=new WeakSet);let r=Ln(),[i,a=""]=t.split("@"),f=Object.entries(n.replace(/\s+/g," ").trim().split(" ").reduce((p,l)=>{let[c,...b]=l.split(":"),T=Do[c];if(!T)throw TypeError(`Unsupported layout rule: '${c}'`);return Object.assign(p,typeof T=="function"?T(p,...b.map(h=>h.match(/--.*/)?`var(${h})`:h)):T)},{})).reduce((p,[l,c])=>c!==void 0&&c!==""?p+`${l}: ${c};`:p,""),u=a.split(":").reduce((p,l)=>l===""?p:p+` and (${_o[l]||`min-width: ${l}`})`,"@media screen");if(o){let p=`:host(:where(.${s}-s${i}))`,l=`:where(.${s}-c${i})`;[p,l].forEach(c=>{r.insertRule(a?`${u} { ${c} { ${f} } }`:`${c} { ${f} }`,r.cssRules.length-1)})}else{let p=`.${s}${i}`;r.insertRule(a?`${u} { ${p} { ${f} } }`:`${p} { ${f} }`,r.cssRules.length-1)}return s}var Ve=new WeakMap;function Uo(e,t){let n=D(e),o=n.startNode,s=ie(n.endNode);t.parentNode.insertBefore(e,t.nextSibling);let r=e,i=o;for(;i;){let a=i.nextSibling;r.parentNode.insertBefore(i,r.nextSibling),r=i,i=a!==s.nextSibling&&a}}function Ot(e,t,n,o,s){let r=Ve.get(t),i=n.map((p,l)=>({id:hasOwnProperty.call(p,"id")?p.id:l,value:p,placeholder:null,available:!0}));if(Ve.set(t,i),r){let p=new Set;for(let l of i)p.add(l.id);r=r.filter(l=>p.has(l.id)?!0:(G(l.placeholder),l.placeholder.parentNode.removeChild(l.placeholder),!1))}let a=t,f=n.length-1,u=D(t);for(let p=0;p<i.length;p+=1){let l=i[p],c;if(r){for(let b=0;b<r.length;b+=1)if(r[b].available&&r[b].id===l.id){c=r[b];break}}c?(c.available=!1,l.placeholder=c.placeholder,l.placeholder.previousSibling!==a&&Uo(l.placeholder,a),c.value!==l.value&&o(e,l.placeholder,l.value,c.value,s)):(l.placeholder=globalThis.document.createTextNode(""),a.parentNode.insertBefore(l.placeholder,a.nextSibling),o(e,l.placeholder,l.value,void 0,s)),a=ie(D(l.placeholder,{}).endNode||l.placeholder),p===0&&(u.startNode=l.placeholder),p===f&&(u.endNode=a)}if(r)for(let p of r)p.available&&(G(p.placeholder),p.placeholder.parentNode.removeChild(p.placeholder))}function Nt(e,t,n){G(t);let o=D(t);o.startNode=o.endNode=n,t.parentNode.insertBefore(n,t.nextSibling)}function Mn(e){let t=typeof e;if(t==="object"){if(Array.isArray(e))return"array";if(e instanceof globalThis.Node)return"node"}return t}function Y(e,t,n,o,s){let r=Mn(n),i=Mn(o);switch(i!=="undefined"&&r!==i&&(r!=="function"&&G(t),i==="array"?Ve.delete(t):i!=="node"&&i!=="function"&&(t.textContent="")),r){case"array":Ot(e,t,n,Y,s);break;case"node":Nt(e,t,n);break;case"function":s&&(n.useLayout=!0),n(e,t);break;default:t.textContent=r==="number"||n?n:""}}var jt=new WeakMap;function Pt(e){return(t,n,o,s)=>{if(s){let r=jt.get(n);n.removeEventListener(e,r.get(s),s.options!==void 0?s.options:!1)}if(o){if(typeof o!="function")throw Error(`Event listener must be a function: ${typeof o}`);let r=jt.get(n);r||(r=new WeakMap,jt.set(n,r));let i=o.bind(null,t);r.set(o,i),n.addEventListener(e,i,o.options!==void 0?o.options:!1)}}}function kt(e,t){if(t)for(let n of String(t).split(/\s+/))n&&e.add(n)}function Ko(e){let t=new Set;if(Array.isArray(e))for(let n of e)kt(t,n);else if(e!==null&&typeof e=="object")for(let[n,o]of Object.entries(e))n&&o&&kt(t,n);else kt(t,e);return t}var An=new WeakMap;function Lt(e,t,n){let o=An.get(t)||new Set,s=Ko(n);An.set(t,s);for(let r of s)t.classList.add(r),o.delete(r);for(let r of o)t.classList.remove(r)}var Rn=new WeakMap;function Ct(e,t,n){if(n===null||typeof n!="object")throw TypeError(`Style value must be an object in ${Z(t)}:`,n);let o=Rn.get(t)||new Map,s=new Map;for(let r of Object.keys(n)){let i=_(r),a=n[r];!a&&a!==0?t.style.removeProperty(i):t.style.setProperty(i,a),s.set(i,a),o.delete(i)}for(let r of o.keys())t.style[r]="";Rn.set(t,s)}function Wn(e,t,n){if(n===!1||n===void 0||n===null)e.removeAttribute(t);else{let o=n===!0?"":String(n);e.setAttribute(t,o)}}function Mt(e,t,n){if(t.substr(0,2)==="on"){let o=t.substr(2);return Pt(o)}switch(e){case"class":return Lt;case"style":return Ct;default:{if(n)return(s,r,i)=>{Wn(r,e,i)};let o;return(s,r,i)=>{o===void 0&&(o=r.tagName!=="svg",o&&(o=t in r,o||(t=e.replace(/-./g,a=>a[1].toUpperCase()),o=t in r))),o?r[t]=i:Wn(r,e,i)}}}}var Un=L("(\\d+)"),$e=new RegExp(`^${Un}$`),ae=new RegExp(Un,"g"),Bo=/^[^A-Za-z]+$/;function Go(e){let t=e[0],n=!1;for(let o=1;o<e.length;o+=1)n=n||t.match(/<\s*(table|th|tr|td|thead|tbody|tfoot|caption|colgroup)([^<>]|"[^"]*"|'[^']*')*>\s*$/),t+=(n?`<!--${L(o-1)}-->`:L(o-1))+e[o],n=n&&!t.match(/<\/\s*(table|th|tr|td|thead|tbody|tfoot|caption|colgroup)\s*>/);return t}function Ho(e){return e.replace(/\s*=\s*['"]*$/g,"").split(/\s+/).pop()}function zn(e){return globalThis.document.createTreeWalker(e,globalThis.NodeFilter.SHOW_ELEMENT|globalThis.NodeFilter.SHOW_TEXT|globalThis.NodeFilter.SHOW_COMMENT,null,!1)}function Xo(e,t=0){e=e.replace(/(^[\n\s\t ]+)|([\n\s\t ]+$)+/g,"");let n=e.indexOf(`
`);if(n>-1){let o=0-t-2;for(n+=1;e[n]===" "&&n<e.length;n+=1)o+=1;return e.replace(/\n +/g,s=>s.substr(0,Math.max(s.length-o,1)))}return e}function Dn(e,t){let n=L(t);return`${Xo(e).split(`
`).filter(s=>s).map(s=>{let r=s.indexOf(n);return r>-1?`| ${s}
--${"-".repeat(r)}${"^".repeat(6)}`:`| ${s}`}).join(`
`).replace(ae,"${...}")}`}var In=new Map,Ue=new WeakMap,_n=new WeakMap;function Jo(e,t){let n=Ue.get(e);if(!n&&!t||t?.length&&n?.length&&t?.every((i,a)=>n[a]===i))return;let o=null;if(t){o=[];for(let i of t){let a=i;a instanceof globalThis.CSSStyleSheet||(a=In.get(i),a||(a=new globalThis.CSSStyleSheet,a.replaceSync(i),In.set(i,a))),o.push(a)}}let s,r=_n.get(e);if(r){s=[];for(let i of e.adoptedStyleSheets)r.includes(i)||s.push(i)}if(o){s=s||e.adoptedStyleSheets.length?[...e.adoptedStyleSheets]:[];for(let i of o)s.push(i)}e.adoptedStyleSheets=s,Ue.set(e,t),_n.set(e,o)}var At=new WeakMap;function Vn(e,t){let n=At.get(e);if(t){let o=Ue.get(e);if(o&&t.every((s,r)=>o[r]===s))return;(!n||n.parentNode!==e)&&(n=globalThis.document.createElement("style"),At.set(e,n),e=ie(e),e.nodeType===globalThis.Node.TEXT_NODE?e.parentNode.insertBefore(n,e.nextSibling):e.appendChild(n)),n.textContent=t.join(`
/*------*/
`),Ue.set(e,t)}else n&&(n.parentNode.removeChild(n),At.set(e,null))}function Kn(e,t,n,o){let s=n?e:Go(e),r=globalThis.document.createElement("template");if(t){r.innerHTML=`<svg>${s}</svg>`;let d=r.content.firstChild;r.content.removeChild(d);for(let m of Array.from(d.childNodes))r.content.appendChild(m)}else r.innerHTML=s;let i,a=r.content.children[0];if(a instanceof globalThis.HTMLTemplateElement){for(let d of Array.from(a.attributes)){let m=d.value.trim();if(m&&d.name.startsWith("layout")){if(m.match(ae))throw Error("Layout attribute cannot contain expressions");i=St(a,d.name.substr(6),m,!0)}}if(i!==void 0&&r.content.children.length>1)throw Error("Template, which uses layout system must have only the '<template>' root element");o=i||a.hasAttribute("layout"),r=a}let f=zn(r.content),u={},p=[],l=0,c=null,b=!1,T=!1;for(;f.nextNode();){let d=f.currentNode;if(c&&!c.contains(d)&&(c=null),d.nodeType===globalThis.Node.COMMENT_NODE&&$e.test(d.textContent)&&(d.parentNode.insertBefore(globalThis.document.createTextNode(d.textContent),d.nextSibling),f.nextNode(),d.parentNode.removeChild(d),d=f.currentNode),d.nodeType===globalThis.Node.TEXT_NODE){let m=d.textContent,y=m.match($e);if(y)d.textContent="",u[y[1]]=[l,Y];else{if(Bn()&&!n&&!c&&!m.match(/^\s*$/)){let g,v=m.trim(),E=v.replace(/\s+/g," ").replace(ae,($,N)=>(N=Number(N),g===void 0&&(g=N),`\${${N-g}}`));if(!E.match(Bo)){let $=d.previousSibling&&d.previousSibling.nodeType===globalThis.Node.COMMENT_NODE?d.previousSibling:"";$&&($.parentNode.removeChild($),l-=1,$=($.textContent.split("|")[1]||"").trim().replace(/\s+/g," "));let N=Rt(E,$).replace(/\${(\d+)}/g,(H,X)=>L(Number(X)+g));m=m.replace(v,N),d.textContent=m}}let w=m.match(ae);if(w){let g=d;w.reduce((v,E)=>{let[$,N]=v.pop().split(E);return $&&v.push($),v.push(E),N&&v.push(N),v},[m]).forEach((v,E)=>{E===0?g.textContent=v:(g=g.parentNode.insertBefore(globalThis.document.createTextNode(v),g.nextSibling),f.currentNode=g,l+=1);let $=g.textContent.match($e);$&&(g.textContent="",u[$[1]]=[l,Y])})}}}else if(d.nodeType===globalThis.Node.ELEMENT_NODE){(d.tagName==="STYLE"||d.tagName==="SLOT"||d.tagName==="LINK"&&d.rel==="stylesheet")&&(b=!0,T=T||d.tagName==="SLOT"),!c&&(d.getAttribute("translate")==="no"||d.tagName==="SCRIPT"||d.tagName==="STYLE")&&(c=d);let m=d.tagName.toLowerCase();m.match(/.+-.+/)&&!globalThis.customElements.get(m)&&!p.includes(m)&&p.push(m);for(let y of Array.from(d.attributes)){let w=y.value.trim(),g=y.name;if(o&&g.startsWith("layout")&&w){if(w.match(ae))throw Error("Layout attribute cannot contain expressions");let E=St(d,g.substr(6),w);d.removeAttribute(g),d.classList.add(E);continue}let v=w.match($e);if(v){let E=Ho(e[v[1]]);u[v[1]]=[l,Mt(g,E,t)],d.removeAttribute(y.name)}else{let E=w.match(ae);if(E){let $=`attr__${g}`;for(let[N,H]of E.entries()){let[,X]=H.match($e),J=!1;u[X]=[l,(q,I,Gt)=>{let ue=D(I);ue[$]=(ue[$]||w).replace(H,Gt??""),(E.length===1||N+1===E.length)&&(J=J||!t&&!(I instanceof globalThis.SVGElement)&&g in I,J?I[g]=ue[$]:I.setAttribute(g,ue[$]),ue[$]=void 0)}]}y.value=""}}}}l+=1}p.length&&console.warn(`Not defined ${p.map(d=>`<${d}>`).join(", ")} element${p.length>1?"s":""} found in the template:
${Dn(s,-1)}`);let h=Object.keys(u);return function(m,y,w,g){if(y){if(T&&!m.shadowRoot)throw TypeError("The <slot> element found - use 'shadow' options to explicitly define Shadow DOM mode")}else y=m.shadowRoot||(b||g)&&m.attachShadow({mode:"open"})||m;let v=D(y);if(r!==v.template){let E=globalThis.document.importNode(r.content,!0),$=zn(E),N=[],H=0,X=0,J=u[h[X]];for(;$.nextNode();){let q=$.currentNode;for(;J&&J[0]===H;)N.push({index:h[X],node:q,fn:J[1]}),X+=1,J=u[h[X]];H+=1}if(v.hostLayout&&m.classList.remove(v.hostLayout),G(y),v=D(y),v.template=r,v.markers=N,y.nodeType===globalThis.Node.TEXT_NODE){Vn(y),v.startNode=E.childNodes[0],v.endNode=E.childNodes[E.childNodes.length-1];let q=y,I=E.childNodes[0];for(;I;)y.parentNode.insertBefore(I,q.nextSibling),q=I,I=E.childNodes[0]}else{if(o){let q=`${i}-${m===y?"c":"s"}`;m.classList.add(q),v.hostLayout=q}y.appendChild(E)}o&&Cn(y)}y.adoptedStyleSheets?Jo(y,g):Vn(y,g);for(let E of v.markers){let $=w[E.index],N;if(!(v.prevArgs&&(N=v.prevArgs[E.index],N===$)))try{E.fn(m,E.node,$,N,o)}catch(H){throw console.error(`Error while updating template expression in ${Z(m)}:
${Dn(s,E.index)}`),H}}return v.prevArgs=w,y}}var It={};Ht(It,{resolve:()=>zt,set:()=>Dt,transition:()=>Xn});var Wt=new WeakMap;function zt(e,t,n=200){return function o(s,r){let i=o.useLayout,a;t&&(a=setTimeout(()=>{a=void 0,Y(s,r,t,void 0,i)},n)),Wt.set(r,e),e.then(f=>{a&&clearTimeout(a),Wt.get(r)===e&&(Y(s,r,f,t&&!a?t:void 0,i),Wt.set(r,null))})}}function Gn({target:e,detail:t},n){let o;switch(e.type){case"radio":case"checkbox":o=e.checked&&e.value;break;case"file":o=e.files;break;default:o=t&&hasOwnProperty.call(t,"value")?t.value:e.value}n(o)}function qo(e,t){return e.split(".").reverse().reduce((n,o)=>n?{[o]:n}:{[o]:t},null)}var Hn=new Map;function Dt(e,t){if(!e)throw Error(`The first argument must be a property name or an object instance: ${e}`);if(typeof e=="object"){if(t===void 0)throw Error("For model instance property the second argument must be defined");let o=ne.get(e);if(!o)throw Error("Provided object must be a model instance of the store");return t===null?()=>{o.set(e,null)}:(s,r)=>{Gn(r,i=>{o.set(e,qo(t,i))})}}if(arguments.length===2)return o=>{o[e]=t};let n=Hn.get(e);return n||(n=(o,s)=>{Gn(s,r=>{o[e]=r})},Hn.set(e,n)),n}var Ke,Xn=globalThis.document&&globalThis.document.startViewTransition!==void 0&&function(t){return function n(o,s){if(Ke){console.warn(`${Z(o)}: view transition already started in ${Z(Ke)}`),t(o,s);return}t.useLayout=n.useLayout,Ke=o,globalThis.document.startViewTransition(()=>(t(o,s),C.then(()=>{Ke=void 0})))}}||(e=>e);var _t={};Ht(_t,{css:()=>Zo,key:()=>Fo,style:()=>Yo,use:()=>Qo});function Fo(e){return this.id=e,this}function Yo(...e){return this.styleSheets=this.styleSheets||[],this.styleSheets.push(...e),this}function Zo(e,...t){this.styleSheets=this.styleSheets||[];let n=e[0];for(let o=1;o<e.length;o++)n+=(t[o-1]!==void 0?t[o-1]:"")+e[o];return this.styleSheets.push(n),this}function Qo(e){return this.plugins=this.plugins||[],this.plugins.push(e),this}var qn=L(),er=L("svg"),tr=L("layout"),Jn=new Map;function xe(e,t,n,o,s){function r(i,a){r.useLayout&&(n+=tr);let f=Jn.get(n);return f||(f=Kn(e,o,s,r.useLayout),Jn.set(n,f)),r.plugins?r.plugins.reduce((u,p)=>p(u),()=>f(i,a,t,r.styleSheets))(i,a):f(i,a,t,r.styleSheets)}return Object.assign(r,_t)}function Fn(e,...t){let n=e.join(qn);return xe(e,t,n,!1,!1)}function nr(e,...t){let n=e.join(qn)+er;return xe(e,t,n,!0,!1)}Object.freeze(Object.assign(Fn,It));var ce=new Map,Yn=new Map,fe=null,Vt=(()=>{let e;try{e=globalThis.navigator.languages||[globalThis.navigator.language]}catch{e=[]}return e.reduce((t,n)=>{let o=n.split("-")[0];return t.add(n),n!==o&&t.add(o),t},new Set)})();function Bn(){return fe!==null||ce.size}var Zn=new Map;function Rt(e,t,n=[]){e=e.trim().replace(/\s+/g," "),t=t.trim();let o=`${e} | ${t}`,s=Yn.get(o);if(!s){if(ce.size)for(let r of Vt){let i=ce.get(r);if(i&&(s=i[o]||i[e],s)){if(s=s.message,typeof s=="object"){let a=Zn.get(r);a||(a=new Intl.PluralRules(r),Zn.set(r,a));let f=s;s=u=>u===0&&f.zero||f[a.select(u)]||f.other||""}break}}s||(fe&&(s=fe(e,t)),s||(s=e,(ce.size||fe)&&console.warn(`Missing translation: "${e}"${t?` [${t}]`:""}`))),Yn.set(o,s)}return typeof s=="function"?s(n[0]):s}function or(e){return e.replace("$","@").replace(/[^a-zA-Z0-9_@]/g,"_").toLowerCase()}function Qn(e,t){switch(typeof e){case"function":{if((t||{}).format==="chrome.i18n"){let o=new Map;fe=(s,r)=>{s=r?`${s} | ${r}`:s;let i=o.get(s);return i||(i=or(s),o.set(s,i)),e(i,r)}}else fe=e;break}case"string":{if(!t||typeof t!="object")throw TypeError("Messages must be an object");e==="default"&&Vt.add("default");let n=ce.get(e)||{};ce.set(e,{...n,...t});break}default:throw TypeError("The first argument must be a string or a function")}}Object.defineProperty(Qn,"languages",{get:()=>Array.from(Vt)});function Ut(e,t){let n="";for(let[r,i]of e.entries())n+=r?`\${${r-1}}${i}`:i;let[o,,s=""]=n.split("|");return Rt(o,s,t)}var Kt=/\$\{(\d+)\}/g;function Bt(e,...t){return Ut(e,t).replace(Kt,(n,o)=>t[o])}var eo=L("msg"),rr=L("svg");Bt.html=function(t,...n){let o=Ut(t,n);return xe(o.replace(Kt,(s,r)=>L(r)),n,o+eo,!1,!0)};Bt.svg=function(t,...n){let o=Ut(t,n);return xe(o.replace(Kt,(s,r)=>L(r)),n,o+eo+rr,!0,!0)};export{ln as children,Ge as debug,Qe as define,Be as dispatch,Fn as html,Qn as localize,rn as mount,Bt as msg,sn as parent,Wo as router,Eo as store,nr as svg};
//# sourceMappingURL=hybrids.mjs.map